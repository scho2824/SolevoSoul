-- Create tarot_deck_data table
CREATE TABLE IF NOT EXISTS public.tarot_deck_data (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name_en TEXT NOT NULL,
    name_kr TEXT NOT NULL,
    suit TEXT, -- 'wands', 'cups', 'swords', 'pentacles', or NULL for Major
    number INTEGER NOT NULL,
    arcana_type TEXT NOT NULL CHECK (arcana_type IN ('major', 'minor')),
    image_url TEXT, -- Can be local path like '/tarot/major/0_fool.jpg'
    keywords TEXT[],
    description_upright TEXT,
    description_reversed TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Enable RLS
ALTER TABLE public.tarot_deck_data ENABLE ROW LEVEL SECURITY;

-- Allow public read access (authenticated and anon)
CREATE POLICY "Public read access for tarot deck" ON public.tarot_deck_data
    FOR SELECT USING (true);

-- Seed Major Arcana (22 Cards)
INSERT INTO public.tarot_deck_data (name_en, name_kr, number, arcana_type, keywords, description_upright, description_reversed)
VALUES
('The Fool', '바보', 0, 'major', ARRAY['순수', '새로운 시작', '자유', '모험'], 
 '새로운 여정의 시작을 의미합니다. 순수한 마음으로 미지의 세계로 발을 내디딜 준비가 되었습니다. 두려움 없이 현재를 즐기세요.',
 '무모함이나 어리석은 선택을 경고합니다. 현실을 직시하지 않고 충동적으로 행동하는 것은 아닌지 돌아보아야 합니다.'),

('The Magician', '마법사', 1, 'major', ARRAY['창조', '의지', '능력', '실행'], 
 '당신은 이미 필요한 모든 도구와 능력을 갖추고 있습니다. 아이디어를 현실로 만들 수 있는 창조적인 에너지가 가득한 시기입니다.',
 '자신의 능력을 과신하거나, 재능을 잘못된 곳에 쓰고 있을 수 있습니다. 속임수나 겉치레에 주의하세요.'),

('The High Priestess', '고위 여사제', 2, 'major', ARRAY['직관', '무의식', '지혜', '신비'], 
 '내면의 목소리에 귀를 기울여야 할 때입니다. 논리적인 사고보다 직관과 통찰력이 중요한 시기입니다. 서두르지 말고 기다리세요.',
 '자신의 직관을 무시하고 있거나, 비밀이 드러날 수 있습니다. 감정적으로 폐쇄적이거나 냉담해질 수 있음을 경고합니다.'),

('The Empress', '여황제', 3, 'major', ARRAY['풍요', '모성', '창조성', '사랑'], 
 '물질적, 정신적 풍요로움이 가득한 시기입니다. 창조적인 작업이나 관계에서 좋은 결실을 맺을 수 있습니다. 자연과 교감하세요.',
 '과도한 사치나 게으름에 빠질 수 있습니다. 혹은 타인에게 너무 의존적이거나 소유욕이 강해질 수 있습니다.'),

('The Emperor', '황제', 4, 'major', ARRAY['권위', '구조', '리더십', '안정'], 
 '질서와 안정을 추구해야 할 때입니다. 리더십을 발휘하거나, 체계적인 계획을 통해 목표를 달성할 수 있습니다. 규칙을 지키는 것이 중요합니다.',
 '권위적인 태도나 고집불통이 문제가 될 수 있습니다. 너무 엄격한 통제는 오히려 반발을 살 수 있습니다. 유연함이 필요합니다.'),

('The Hierophant', '교황', 5, 'major', ARRAY['전통', '가르침', '신념', '조언'], 
 '전통적인 가치나 지혜를 따르는 것이 좋습니다. 멘토나 전문가의 조언을 구하거나, 영적인 깨달음을 얻을 수 있는 기회입니다.',
 '지나친 보수성이나 독단적인 태도를 경계해야 합니다. 맹목적인 믿음이나 틀에 박힌 사고방식에서 벗어나야 할 수도 있습니다.'),

('The Lovers', '연인', 6, 'major', ARRAY['사랑', '조화', '선택', '결합'], 
 '중요한 선택의 기로에 서 있습니다. 사랑이나 인간관계에서의 깊은 유대감을 의미하며, 가치관의 조화를 통해 올바른 결정을 내려야 합니다.',
 '유혹에 빠지거나 잘못된 선택을 할 위험이 있습니다. 관계에서의 불화나 우유부단함으로 인해 갈등이 생길 수 있습니다.'),

('The Chariot', '전차', 7, 'major', ARRAY['승리', '의지', '행동', '전진'], 
 '목표를 향해 거침없이 나아가야 할 때입니다. 강한 의지와 결단력으로 장애물을 극복하고 승리를 쟁취할 수 있습니다.',
 '통제력을 잃고 폭주할 위험이 있습니다. 지나친 경쟁심이나 공격성은 오히려 해가 될 수 있으니 균형을 잡으세요.'),

('Strength', '힘', 8, 'major', ARRAY['인내', '용기', '절제', '내면의 힘'], 
 '부드러움이 강함을 이깁니다. 인내심과 포용력으로 어려움을 극복할 수 있습니다. 내면의 두려움을 다스리는 것이 중요합니다.',
 '자신감이 부족하거나, 본능에 휘둘릴 수 있습니다. 또는 너무 억압하여 내면의 갈등이 심해질 수 있습니다.'),

('The Hermit', '은둔자', 9, 'major', ARRAY['성찰', '고독', '탐구', '인도'], 
 '잠시 세상과 거리를 두고 내면을 들여다볼 시간입니다. 혼자만의 시간을 통해 깊은 깨달음이나 해답을 찾을 수 있습니다.',
 '지나친 고립이나 현실 도피를 경계해야 합니다. 타인과의 소통을 완전히 단절하는 것은 외로움을 불러올 수 있습니다.'),

('Wheel of Fortune', '운명의 수레바퀴', 10, 'major', ARRAY['변화', '운명', '반전', '주기'], 
 '피할 수 없는 변화의 흐름이 다가옵니다. 상황이 호전되거나 새로운 기회가 찾아올 수 있습니다. 흐름에 몸을 맡기세요.',
 '예기치 않은 불운이나 정체기를 겪을 수 있습니다. 변화에 저항하기보다 유연하게 대처하는 것이 현명합니다.'),

('Justice', '정의', 11, 'major', ARRAY['공정', '균형', '책임', '진실'], 
 '공정하고 이성적인 판단이 필요한 시기입니다. 당신의 행동에 대한 결과가 정직하게 돌아올 것입니다. 균형을 잃지 마세요.',
 '편파적인 판단이나 부정직한 행동은 화를 부를 수 있습니다. 자신에게 엄격하되 타인에게도 공정해야 합니다.'),

('The Hanged Man', '매달린 사람', 12, 'major', ARRAY['희생', '시련', '새로운 관점', '정지'], 
 '잠시 멈춰서 상황을 다른 관점에서 바라보아야 합니다. 눈앞의 손해나 희생이 더 큰 가치를 위한 밑거름이 될 수 있습니다.',
 '무의미한 희생이나 헛된 노력에 매달려 있을 수 있습니다. 고집을 버리고 상황을 받아들이는 유연함이 필요합니다.'),

('Death', '죽음', 13, 'major', ARRAY['종결', '새로운 시작', '변형', '이별'], 
 '하나의 챕터가 끝나고 새로운 챕터가 시작됩니다. 과거의 것을 과감히 놓아주어야 새로운 기회를 맞이할 수 있습니다.',
 '변화를 두려워하여 과거에 집착하고 있을 수 있습니다. 끝난 관계나 상황을 억지로 붙잡는 것은 고통만 연장할 뿐입니다.'),

('Temperance', '절제', 14, 'major', ARRAY['조화', '중용', '적응', '치유'], 
 '극단을 피하고 중용을 지키는 것이 중요합니다. 서로 다른 요소들을 조화롭게 섞어 새로운 것을 만들어낼 수 있습니다.',
 '균형이 깨지거나 과도한 욕심을 부릴 수 있습니다. 감기복이 심하거나 충동적인 행동을 자제해야 합니다.'),

('The Devil', '악마', 15, 'major', ARRAY['속박', '유혹', '집착', '물질'], 
 '건강하지 못한 욕망이나 관계에 얽매여 있을 수 있습니다. 자신을 구속하는 것이 무엇인지 깨닫고 벗어나려는 노력이 필요합니다.',
 '중독이나 나쁜 습관에서 벗어날 기회일 수도 있지만, 스스로를 더 깊은 구렁텅이로 몰아넣을 수도 있음을 경고합니다.'),

('The Tower', '탑', 16, 'major', ARRAY['파괴', '진실', '격변', '해방'], 
 '견고해 보이던 것이 무너질 수 있습니다. 갑작스러운 변화나 충격이 있을 수 있지만, 이는 거짓된 기반을 허물고 진실을 마주하게 합니다.',
 '변화를 거부하면 더 큰 고통이 따를 수 있습니다. 무너진 자리에서 다시 시작할 용기가 필요합니다.'),

('The Star', '별', 17, 'major', ARRAY['희망', '치유', '영감', '평온'], 
 '어둠이 걷히고 희망의 빛이 보입니다. 긍정적인 에너지와 영감이 가득하며, 소원이 이루어질 수 있는 시기입니다.',
 '현실감 없는 이상이나 헛된 기대에 빠질 수 있습니다. 희망을 갖되 현실적인 노력도 병행해야 합니다.'),

('The Moon', '달', 18, 'major', ARRAY['불안', '환상', '무의식', '혼란'], 
 '앞이 보이지 않는 모호한 상황입니다. 불안감이나 두려움이 커질 수 있으며, 눈에 보이는 것이 전부가 아님을 명심하세요.',
 '내면의 공포에 압도되거나 스스로를 속일 수 있습니다. 명확해질 때까지 섣불리 행동하지 않는 것이 좋습니다.'),

('The Sun', '태양', 19, 'major', ARRAY['성공', '행복', '활력', '순수'], 
 '모든 것이 밝고 긍정적입니다. 성공과 행복이 따르며, 에너지가 넘치는 시기입니다. 당신의 빛을 마음껏 발산하세요.',
 '지나친 낙관주의나 자만심을 경계해야 합니다. 혹은 잠시 구름에 가려져 빛을 보지 못하는 상황일 수도 있습니다.'),

('Judgement', '심판', 20, 'major', ARRAY['부활', '보상', '각성', '새로운 소명'], 
 '과거의 노력에 대한 보상을 받거나, 중요한 결단을 내려야 할 때입니다. 새로운 소명을 깨닫고 다시 일어설 수 있는 기회입니다.',
 '과거에 대한 후회나 미련으로 앞으로 나아가지 못할 수 있습니다. 자신의 잘못을 인정하고 변화를 받아들이세요.'),

('The World', '세계', 21, 'major', ARRAY['완성', '통합', '여행', '성취'], 
 '긴 여정이 끝나고 목표를 달성하는 순간입니다. 완벽한 조화와 만족감을 느끼며, 더 큰 세계로 나아갈 준비를 마쳤습니다.',
 '완성에 거의 도달했으나 마지막 한 조각이 부족할 수 있습니다. 안주하지 말고 끝까지 최선을 다하세요.');
